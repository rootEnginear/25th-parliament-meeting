const el_dialog=document.getElementById("instruction-dialog"),el_search_input=document.getElementById("search-input"),el_search_btn=document.getElementById("search-btn"),el_articles=Array.from(document.querySelectorAll("article"));let highlighted_el=[];const goTop=()=>{window.scrollTo(0,0)},goBottom=()=>{window.scrollTo(0,document.body.scrollHeight)},showInstruction=()=>{el_dialog?.showModal()},markArticles=e=>{if("keydown"===e.type&&"Enter"!==e.key)return;let t,l;el_search_btn.innerText="Marking...";const n=[...new Set(el_search_input.value.split(" ").map((e=>e.replace(/_/g," ").replace(/\\ /g,"_").trim())).filter((e=>e)))],i=[],r=[],o=[];for(t=0;t<n.length;t++){const e=n[t];"+"===e[0]?r.push(e.substring(1)):"-"===e[0]?o.push(e.substring(1)):i.push(e)}if(highlighted_el.forEach((e=>e.classList.remove("highlight"))),highlighted_el=[],i.length+r.length+o.length!==0)e:for(t=0;t<el_articles.length;t++){const e=el_articles[t].textContent;for(l=0;l<o.length;l++)if(e?.includes(o[l]))continue e;for(l=0;l<r.length;l++)if(!e?.includes(r[l]))continue e;for(l=0;l<i.length&&!e?.includes(i[l]);l++);l!==i.length&&(el_articles[t].classList.add("highlight"),highlighted_el.push(el_articles[t]))}highlighted_el[0]&&highlighted_el[0].scrollIntoView(),window.queueMicrotask((()=>{el_search_btn.innerText="Marked",setTimeout((()=>el_search_btn.innerText="Mark"),500)}))};el_search_input.addEventListener("keydown",markArticles),el_search_btn.addEventListener("click",markArticles),el_search_btn.innerText="Mark",Array.from(document.querySelectorAll('link[media="print"]')).forEach((e=>e.media="all"));